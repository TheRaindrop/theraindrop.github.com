webpackJsonp([3],{"8RT7":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{editable:!1}},props:{type:{type:String,default:"text"},inputWidth:{type:Number,default:150},value:{type:String,required:!0}},methods:{editInput:function(){var t=this;this.editable=!0,window.setTimeout(function(){t.$el.querySelector(".input").focus()},0),event.stopPropagation()},focusOut:function(){this.editable=!1,this.$emit("input",event.target.value),event.stopPropagation()},test:function(){console.log(123)}},mounted:function(){}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-edit"},[s("input",{staticClass:"input",style:{width:t.inputWidth+"px"},attrs:{disabled:!t.editable,type:t.type},domProps:{value:t.value},on:{focusout:t.focusOut,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.focusOut(e)}}}),s("span",{on:{click:t.editInput}},[s("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"}})])])},staticRenderFns:[]};var n={components:{inputEdit:s("VU/8")(i,a,!1,function(t){s("Wj8W")},"data-v-572d8c71",null).exports},data:function(){return{userData:[],addModel:!1,modelData:{friendEdit:!1,addressEdit:!1,emailEdit:!1,invoiceEdit:!1},formAddUser:{phone:"",name:"",thisID:"",address:"",email:""},ruleAddUser:{phone:[{validator:function(t,e,s){""===e?s(new Error("请输入电话号码")):/^1[345789]\d{9}$/.test(e)?s():s(new Error("电话号码格式错误"))},trigger:"blur"},{required:!0}],name:[{required:!0,message:"用户姓名不能为空",trigger:"blur"}],thisID:[{validator:function(t,e,s){""===e?s(new Error("身份证号不能为空")):/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(e)?s():s(new Error("身份证号码格式错误"))},trigger:"blur"},{required:!0}],address:[{required:!1}],email:[{required:!1},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]},formFriend:{name:"",phone:"",thisID:"",pastPhone:""}}},methods:{addAddress:function(t){},addOk:function(t){var e=this,s=this;this.$refs[t].validate(function(t){t&&e.$http.post("/user/add/",s.formAddUser).then(function(t){console.log(t.data),s.addModel=!1,s.$message({message:"ojbk",type:"success"})}).catch(function(t){console.log(t)})})},addCancel:function(t){this.addModel=!1,this.$refs[t].resetFields(),this.$message("取消添加")},friendEdit:function(t){this.modelData.friendEdit=!0,this.formFriend.pastPhone=t.Phone,this.formFriend.name=t.Name,this.formFriend.phone=t.Phone,this.formFriend.thisID=t.thisID},friendChange:function(){this.$http.put("/friend/change/",this.formFriend).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}},created:function(){var t=this;this.$http.get("/all/show/").then(function(e){console.log(e.data),t.userData=e.data}).catch(function(t){console.log(t)})},mounted:function(){}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",[s("div",{staticClass:"methods"},[s("div",{staticClass:"methods-left"},[s("h3",[t._v("用户信息列表")])]),s("div",{staticClass:"methods-right"},[s("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{size:"small"}}),s("el-button",{attrs:{type:"success",size:"small"}},[t._v("搜索机主")]),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addModel=!0}}},[t._v("新增机主")]),s("el-dialog",{attrs:{title:"新增用户",visible:t.addModel,width:"30%"},on:{"update:visible":function(e){t.addModel=e}}},[s("div",{staticClass:"content"},[s("el-form",{ref:"formAddUser",attrs:{model:t.formAddUser,rules:t.ruleAddUser,"label-width":"80px","label-position":"right"}},[s("el-form-item",{attrs:{label:"手机",prop:"phone"}},[s("el-input",{model:{value:t.formAddUser.phone,callback:function(e){t.$set(t.formAddUser,"phone",e)},expression:"formAddUser.phone"}})],1),s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{model:{value:t.formAddUser.name,callback:function(e){t.$set(t.formAddUser,"name",e)},expression:"formAddUser.name"}})],1),s("el-form-item",{attrs:{label:"ID",prop:"thisID"}},[s("el-input",{model:{value:t.formAddUser.thisID,callback:function(e){t.$set(t.formAddUser,"thisID",e)},expression:"formAddUser.thisID"}})],1),s("el-form-item",{attrs:{label:"地址",prop:"address"}},[s("el-input",{model:{value:t.formAddUser.address,callback:function(e){t.$set(t.formAddUser,"address",e)},expression:"formAddUser.address"}})],1),s("el-form-item",{attrs:{label:"email",prop:"email"}},[s("el-input",{model:{value:t.formAddUser.email,callback:function(e){t.$set(t.formAddUser,"email",e)},expression:"formAddUser.email"}})],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.addCancel("formAddUser")}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addOk("formAddUser")}}},[t._v("确定")])],1)])],1)]),s("div",{staticClass:"user-table"},[s("div",{staticClass:"table-head"},[s("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[s("el-col",{attrs:{span:2}},[s("div",{staticClass:"table-head__item"},[t._v("机主姓名")])]),s("el-col",{attrs:{span:2}},[s("div",{staticClass:"table-head__item"},[t._v("手机")])]),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"table-head__item"},[t._v("关联旅客")])]),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"table-head__item"},[t._v("通讯地址")])]),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"table-head__item"},[t._v("邮箱地址")])]),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"table-head__item"},[t._v("发票信息")])])],1)],1),s("div",{staticClass:"table-body"},["string"!=typeof t.userData?s("div",{staticClass:"table-body__block"},t._l(t.userData,function(e,i){return s("div",{staticClass:"host-line"},[s("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[s("el-col",{staticClass:"host-line__element",attrs:{span:2}},[s("div",{staticClass:"host-line__item"},[t._v(t._s(e.Name))])]),s("el-col",{staticClass:"host-line__element",attrs:{span:2}},[s("div",{staticClass:"host-line__item"},[t._v(t._s(e.Phone))])]),s("el-col",{staticClass:"host-line__element",attrs:{span:5}},[s("div",{staticClass:"host-line__item"},[t._l(e.Friends,function(i,a){return s("el-card",{key:a,staticClass:"edit-card friend",attrs:{"body-style":{padding:"10px"}}},[s("div",{staticClass:"friend__name friend__item"},[s("span",{staticClass:"friend__item_label"},[t._v("姓名：")]),s("span",[t._v(t._s(i.Name))])]),s("div",{staticClass:"friend__phone friend__item"},[s("span",{staticClass:"friend__item_label"},[t._v("手机：")]),s("span",[t._v(t._s(i.Phone))])]),s("div",{staticClass:"friend__id friend__item"},[s("span",{staticClass:"friend__item_label"},[t._v("ID：")]),s("span",[t._v(t._s(i.thisID))])]),s("div",{staticClass:"edit-card__btn"},[s("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"},on:{click:function(s){t.friendEdit(i,e.Phone)}}})])])}),s("div",{staticClass:"add-friend"},[s("el-button",{staticClass:"btn-add"},[s("i",{staticClass:"el-icon-plus"})])],1)],2)]),s("el-col",{staticClass:"host-line__element",attrs:{span:3}},[s("div",{staticClass:"host-line__item"},[t._l(e.Address,function(e,a){return s("div",{staticClass:"address"},[s("span",[s("el-card",{staticClass:"edit-card",attrs:{"body-style":{padding:"10px"}}},[t._v(t._s(t.userData[i].Address[a])),s("div",{staticClass:"edit-card__btn"},[s("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"},on:{click:function(e){t.modelData.friendEdit=!0}}})])])],1)])}),s("div",{staticClass:"add-address"},[s("el-button",{staticClass:"btn-add",on:{click:function(s){t.addAddress(e)}}},[s("i",{staticClass:"el-icon-plus"})])],1)],2)]),s("el-col",{staticClass:"host-line__element",attrs:{span:3}},[s("div",{staticClass:"host-line__item"},t._l(e.Email,function(e,a){return s("div",{staticClass:"email"},[s("span",[s("el-card",{staticClass:"edit-card",attrs:{"body-style":{padding:"10px"}}},[t._v(t._s(t.userData[i].Email[a])),s("div",{staticClass:"edit-card__btn"},[s("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"},on:{click:function(e){t.modelData.friendEdit=!0}}})])])],1)])}))]),s("el-col",{staticClass:"host-line__element",attrs:{span:3}},[s("div",{staticClass:"host-line__item"},[t._l(e.Invoice,function(i,a){return s("el-card",{key:a,staticClass:"edit-card invoice",attrs:{"body-style":{padding:"10px"}}},[s("div",{staticClass:"invoice__title"},[s("span",[t._v(t._s(i.Title))])]),s("div",{staticClass:"invoice__num"},[s("span",[t._v(t._s(i.taxNo))])]),s("div",{staticClass:"edit-card__btn"},[s("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"},on:{click:function(s){t.friendEdit(t.item_fri,e.Phone)}}})])])}),s("div",{staticClass:"add-invoice"},[s("el-button",{staticClass:"btn-add"},[s("i",{staticClass:"el-icon-plus"})])],1)],2)])],1)],1)})):t._e()])]),s("div",{staticClass:"user-model"},[s("el-dialog",{attrs:{title:"朋友编辑",visible:t.modelData.friendEdit,width:"30%"},on:{"update:visible":function(e){t.$set(t.modelData,"friendEdit",e)}}},[s("el-form",{attrs:{model:t.formFriend,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{model:{value:t.formFriend.name,callback:function(e){t.$set(t.formFriend,"name",e)},expression:"formFriend.name"}})],1),s("el-form-item",{attrs:{label:"电话"}},[s("el-input",{model:{value:t.formFriend.phone,callback:function(e){t.$set(t.formFriend,"phone",e)},expression:"formFriend.phone"}})],1),s("el-form-item",{attrs:{label:"ID"}},[s("el-input",{model:{value:t.formFriend.thisID,callback:function(e){t.$set(t.formFriend,"thisID",e)},expression:"formFriend.thisID"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger"}},[t._v("删除")]),s("el-button",{attrs:{type:"primary"},on:{click:t.friendChange}},[t._v("保存")])],1)],1)],1)])],1)},staticRenderFns:[]};var d=s("VU/8")(n,l,!1,function(t){s("FkA9")},"data-v-6af036d2",null);e.default=d.exports},FkA9:function(t,e){},Wj8W:function(t,e){}});
//# sourceMappingURL=3.c7fea719fe724a08c40b.js.map