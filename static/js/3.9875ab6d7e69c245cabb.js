webpackJsonp([3],{"8RT7":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("woOf"),a=i.n(s),n={data:function(){return{editable:!1}},props:{type:{type:String,default:"text"},inputWidth:{type:Number,default:150},value:{type:String,required:!0}},methods:{editInput:function(){var t=this;this.editable=!0,window.setTimeout(function(){t.$el.querySelector(".input").focus()},0),event.stopPropagation()},focusOut:function(){this.editable=!1,this.$emit("input",event.target.value),event.stopPropagation()},test:function(){console.log(123)}},mounted:function(){}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-edit"},[i("input",{staticClass:"input",style:{width:t.inputWidth+"px"},attrs:{disabled:!t.editable,type:t.type},domProps:{value:t.value},on:{focusout:t.focusOut,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.focusOut(e)}}}),i("span",{on:{click:t.editInput}},[i("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"}})])])},staticRenderFns:[]};var o={components:{inputEdit:i("VU/8")(n,l,!1,function(t){i("Wj8W")},"data-v-572d8c71",null).exports},data:function(){return{loading:!1,userData:[],editModel:!1,modelData:{friendEdit:!1,addressEdit:!1,emailEdit:!1,invoiceEdit:!1},formEditUser:{email:"afdsfdsf"},ruleEditUser:{email:[{type:"email",required:!1,message:"邮箱格式错误",trigger:"blur"}]},formFriend:{name:"",phone:"",thisID:"",pastPhone:""}}},methods:{hostEdit:function(t){this.editModel=!0,this.formEditUser=a()({},t)},addAddress:function(t){},addOk:function(t){var e=this,i=this;this.$refs[t].validate(function(t){t?e.$http.patch("/users/"+i.formEditUser.id,{nickname:i.formEditUser.nickname,email:i.formEditUser.email}).then(function(t){i.editModel=!1,i.loading=!0,i.$message({message:"修改成功",type:"success"}),i.$http.get("/users").then(function(t){i.loading=!1,i.userData=t.data}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)}):e.$message("邮箱格式错误")})},addCancel:function(t){this.formEditUser={},this.editModel=!1,this.$message("取消添加")},friendEdit:function(t){this.modelData.friendEdit=!0,this.formFriend.pastPhone=t.Phone,this.formFriend.name=t.Name,this.formFriend.phone=t.Phone,this.formFriend.thisID=t.thisID},friendChange:function(){this.$http.put("/friend/change/",this.formFriend).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}},created:function(){var t=this;this.$http.get("/users").then(function(e){t.userData=e.data}).catch(function(t){console.log(t)})},mounted:function(){}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("div",{staticClass:"methods"},[i("div",{staticClass:"methods-left"},[i("h3",[t._v("用户信息列表")])]),i("div",{staticClass:"methods-right"},[i("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{size:"small"}}),i("el-button",{attrs:{type:"success",size:"small"}},[t._v("搜索机主")])],1)]),i("div",{staticClass:"user-table"},[i("div",{staticClass:"table-head"},[i("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[i("el-col",{attrs:{span:2}},[i("div",{staticClass:"table-head__item"},[t._v("昵称")])]),i("el-col",{attrs:{span:2}},[i("div",{staticClass:"table-head__item"},[t._v("手机")])]),i("el-col",{attrs:{span:5}},[i("div",{staticClass:"table-head__item"},[t._v("关联旅客")])]),i("el-col",{attrs:{span:3}},[i("div",{staticClass:"table-head__item"},[t._v("通讯地址")])]),i("el-col",{attrs:{span:3}},[i("div",{staticClass:"table-head__item"},[t._v("邮箱地址")])]),i("el-col",{attrs:{span:3}},[i("div",{staticClass:"table-head__item"},[t._v("发票信息")])]),i("el-col",{attrs:{span:2}},[i("div",{staticClass:"table-head__item"},[t._v("操作")])])],1)],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-body"},["string"!=typeof t.userData?i("div",{staticClass:"table-body__block"},t._l(t.userData,function(e,s){return i("div",{staticClass:"host-line"},[i("el-row",{staticStyle:{width:"100%",display:"flex","align-items":"center"},attrs:{gutter:10}},[i("el-col",{staticClass:"host-line__element",attrs:{span:2}},[i("div",{staticClass:"host-line__item"},[t._v(t._s(e.nickname))])]),i("el-col",{staticClass:"host-line__element",attrs:{span:2}},[i("div",{staticClass:"host-line__item"},[t._v(t._s(e.phone))])]),i("el-col",{staticClass:"host-line__element",attrs:{span:5}},[i("div",{staticClass:"host-line__item"},[t._l(e.Friends,function(s,a){return i("el-card",{key:a,staticClass:"edit-card friend",attrs:{"body-style":{padding:"10px"}}},[i("div",{staticClass:"friend__name friend__item"},[i("span",{staticClass:"friend__item_label"},[t._v("姓名：")]),i("span",[t._v(t._s(s.Name))])]),i("div",{staticClass:"friend__phone friend__item"},[i("span",{staticClass:"friend__item_label"},[t._v("手机：")]),i("span",[t._v(t._s(s.Phone))])]),i("div",{staticClass:"friend__id friend__item"},[i("span",{staticClass:"friend__item_label"},[t._v("ID：")]),i("span",[t._v(t._s(s.thisID))])]),i("div",{staticClass:"edit-card__btn"},[i("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"},on:{click:function(i){t.friendEdit(s,e.Phone)}}})])])}),i("div",{staticClass:"add-friend"},[i("el-button",{staticClass:"btn-add"},[i("i",{staticClass:"el-icon-plus"})])],1)],2)]),i("el-col",{staticClass:"host-line__element",attrs:{span:3}},[i("div",{staticClass:"host-line__item"},[t._l(e.Address,function(e,a){return i("div",{staticClass:"address"},[i("span",[i("el-card",{staticClass:"edit-card",attrs:{"body-style":{padding:"10px"}}},[t._v(t._s(t.userData[s].Address[a])),i("div",{staticClass:"edit-card__btn"},[i("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"},on:{click:function(e){t.modelData.friendEdit=!0}}})])])],1)])}),i("div",{staticClass:"add-address"},[i("el-button",{staticClass:"btn-add",on:{click:function(i){t.addAddress(e)}}},[i("i",{staticClass:"el-icon-plus"})])],1)],2)]),i("el-col",{staticClass:"host-line__element",attrs:{span:3}},[i("div",{staticClass:"host-line__item"},[i("div",{staticClass:"host-line__item"},[t._v(t._s(e.email))])])]),i("el-col",{staticClass:"host-line__element",attrs:{span:3}},[i("div",{staticClass:"host-line__item"},[t._l(e.Invoice,function(s,a){return i("el-card",{key:a,staticClass:"edit-card invoice",attrs:{"body-style":{padding:"10px"}}},[i("div",{staticClass:"invoice__title"},[i("span",[t._v(t._s(s.Title))])]),i("div",{staticClass:"invoice__num"},[i("span",[t._v(t._s(s.taxNo))])]),i("div",{staticClass:"edit-card__btn"},[i("i",{staticClass:"el-icon-edit-outline icon_text",attrs:{title:"编辑"},on:{click:function(i){t.friendEdit(t.item_fri,e.Phone)}}})])])}),i("div",{staticClass:"add-invoice"},[i("el-button",{staticClass:"btn-add"},[i("i",{staticClass:"el-icon-plus"})])],1)],2)]),i("el-col",{staticClass:"host-line__element",attrs:{span:2}},[i("div",{staticClass:"host-line__item"},[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.hostEdit(e)}}},[t._v("编辑")])],1)])],1)],1)})):t._e()])]),i("el-dialog",{attrs:{title:"编辑用户",visible:t.editModel,width:"30%"},on:{"update:visible":function(e){t.editModel=e}}},[i("div",{staticClass:"content"},[i("el-form",{ref:"formEditUser",attrs:{model:t.formEditUser,rules:t.ruleEditUser,"label-width":"80px","label-position":"right"}},[i("el-form-item",{attrs:{label:"手机",prop:"phone"}},[i("el-input",{attrs:{disabled:"disabled"},model:{value:t.formEditUser.phone,callback:function(e){t.$set(t.formEditUser,"phone",e)},expression:"formEditUser.phone"}})],1),i("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[i("el-input",{model:{value:t.formEditUser.nickname,callback:function(e){t.$set(t.formEditUser,"nickname",e)},expression:"formEditUser.nickname"}})],1),i("el-form-item",{attrs:{label:"登录名",prop:"username"}},[i("el-input",{attrs:{disabled:"disabled"},model:{value:t.formEditUser.username,callback:function(e){t.$set(t.formEditUser,"username",e)},expression:"formEditUser.username"}})],1),i("el-form-item",{attrs:{label:"Email",prop:"email"}},[i("el-input",{model:{value:t.formEditUser.email,callback:function(e){t.$set(t.formEditUser,"email",e)},expression:"formEditUser.email"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.addCancel}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addOk("formEditUser")}}},[t._v("确定")])],1)]),i("div",{staticClass:"user-model"},[i("el-dialog",{attrs:{title:"朋友编辑",visible:t.modelData.friendEdit,width:"30%"},on:{"update:visible":function(e){t.$set(t.modelData,"friendEdit",e)}}},[i("el-form",{attrs:{model:t.formFriend,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"姓名"}},[i("el-input",{model:{value:t.formFriend.name,callback:function(e){t.$set(t.formFriend,"name",e)},expression:"formFriend.name"}})],1),i("el-form-item",{attrs:{label:"电话"}},[i("el-input",{model:{value:t.formFriend.phone,callback:function(e){t.$set(t.formFriend,"phone",e)},expression:"formFriend.phone"}})],1),i("el-form-item",{attrs:{label:"ID"}},[i("el-input",{model:{value:t.formFriend.thisID,callback:function(e){t.$set(t.formFriend,"thisID",e)},expression:"formFriend.thisID"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"}},[t._v("删除")]),i("el-button",{attrs:{type:"primary"},on:{click:t.friendChange}},[t._v("保存")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,d,!1,function(t){i("EVQi")},"data-v-47d357b4",null);e.default=r.exports},EVQi:function(t,e){},Wj8W:function(t,e){}});
//# sourceMappingURL=3.9875ab6d7e69c245cabb.js.map